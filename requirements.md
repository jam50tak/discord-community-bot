# Discord AI管理Bot 要件定義書

## 1. 概要

Discordコミュニティの運営業務を自動化・支援するAI管理Botの開発

### 1.1 目的
- コミュニティ管理者の日常業務を代替・支援
- 会話分析による運営状況の把握
- ユーザー間トラブルの解決支援
- データに基づいた改善策の提示

### 1.2 対象コミュニティ
- メンバー数: 約4,000人
- 1日平均メッセージ数: 800-1,000件

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 会話分析機能
- **分析対象**: 管理者が設定した特定チャンネル
- **分析頻度**: 手動実行（1日1回想定）
- **期間指定**:
  - 当日の会話
  - 前日の会話
  - 日付指定（最長1週間まで）
- **分析内容**:
  - 会話量・アクティブユーザー数
  - 話題のトレンド分析
  - 感情分析（ポジティブ/ネガティブ）
  - コミュニティ健全性の評価

#### 2.1.2 近況把握・レポート機能
- **レポート内容**:
  - コミュニティ活動状況
  - 注目すべき話題・議論
  - ユーザー参加度の変化
  - コミュニティの健全性評価
- **出力形式**: 実行したチャンネルにメッセージ投稿

#### 2.1.3 改善策提示機能
- 分析結果に基づく具体的な改善案
- 過去のトレンドとの比較
- 優先度付きアクションアイテム

#### 2.1.4 対話型トラブル対応支援機能
- **起動方式**: 管理者の指示による手動実行
- **対応フロー**:
  1. 管理者が問題状況を説明・指示
  2. Botが関連会話を取得・分析
  3. ユーザー背景・会話履歴の把握
  4. 具体的な対応策を提案
  5. 必要に応じて追加情報を要求
- **対応内容**:
  - 当事者ユーザーの把握
  - 問題発生の経緯分析
  - 適切な対処法の提案
  - 予防策の提示

### 2.2 管理機能

#### 2.2.1 管理者コマンドメニュー
- `/analyze` - 会話分析実行
  - 期間オプション: `today`（当日）、`yesterday`（前日）、`date:YYYY-MM-DD`（日付指定）
  - 最大1週間前まで指定可能
- `/quick-analyze` - ワンクリック分析実行
  - 設定済みの期間・プロンプトで即座に実行
  - ボタンUIまたはコマンドで簡単実行
- `/config` - 設定管理
  - チャンネル設定: `/config channels add/remove/list`
  - AI設定: `/config ai set/view` (ChatGPT/Gemini/Claude)
  - APIキー設定: `/config apikey set/remove`
  - プロンプト設定: `/config prompt set/view/reset`
  - ルール設定: `/config rules set/view`
- `/help` - ヘルプ表示
- `/consult` - 対話型相談モード
  - トラブル状況の説明受付
  - 関連会話の自動取得・分析
  - 段階的な対応策提案
  - 追加情報の要求・確認

#### 2.2.2 設定管理機能
- **分析対象チャンネル設定**
  - チャンネル追加/削除
  - サーバー毎の個別設定
- **AI・分析設定**
  - AI選択: ChatGPT/Gemini/Claude
  - APIキー設定・管理
  - サーバー別カスタムプロンプト
  - 分析観点の個別指定
- **コミュニティルール登録**
  - ルール内容の設定・更新
  - 対応方針の登録
- **クライアント要望管理**
  - 要望内容の登録
  - 優先度設定

## 3. 非機能要件

### 3.1 パフォーマンス要件
- 分析処理時間: 5分以内
- レスポンス時間: 30秒以内
- 同時実行: 複数サーバーでの並行利用可能

### 3.2 AI・コスト管理
- **AI選択**: ChatGPT、Gemini、Claude から選択可能
- **APIキー管理**: ユーザーが各AIサービスのAPIキーを設定
- **コスト管理**: 各ユーザーが自己責任でコスト管理

### 3.3 セキュリティ・プライバシー要件
- **メッセージデータ**: 永続保存しない（分析時のみ一時取得）
- **機密情報**: 管理者のみアクセス可能
- **外部API**: ChatGPT/Gemini/Claude API利用（データは分析後破棄）
- **APIキー**: 暗号化して保存、管理者のみアクセス可能

### 3.4 可用性要件
- 稼働率: 99%以上
- メンテナンス時間: 月1回、30分以内

### 3.5 運用要件
- **サーバーコスト**: 無料枠活用（Railway等）
- **AI APIコスト**: ユーザー負担（自己管理）
- **メンテナンス**: 最小限の運用負荷
- **スケーラビリティ**: 複数サーバーへの展開可能

## 4. 制約事項

### 4.1 技術制約
- AI: ChatGPT/Gemini/Claude から選択
- プラットフォーム: Discord専用
- データ保存: 長期保存禁止

### 4.2 コスト制約
- AI API料金: ユーザー自己負担
- インフラ費用: 無料枠の範囲内

### 4.3 法的制約
- Discord ToS遵守
- プライバシー保護
- データ保護規則の遵守

## 5. 成功指標

### 5.1 定量指標
- 管理業務時間の50%削減
- 問題解決時間の30%短縮
- ユーザー満足度の向上

### 5.2 定性指標
- 管理者の負担軽減
- データに基づいた意思決定の実現
- コミュニティ運営品質の向上

## 6. リスクと対策

### 6.1 技術リスク
- **Claude API制限**: レート制限対策、エラーハンドリング
- **Discord API変更**: 定期的な動作確認、アップデート対応

### 6.2 運用リスク
- **誤分析**: 人間による最終判断の重要性を明記
- **プライバシー**: データ取り扱いガイドラインの策定

## 7. 今後の拡張予定

### 7.1 Phase 2候補機能
- リアルタイム問題検知
- 自動モデレーション機能
- 詳細な統計ダッシュボード
- 他プラットフォーム連携